                                          ************************
                                          *****   Keycloak   *****
                                          ************************
  keycloak:
    build:
      context: .
      dockerfile: individuals-api/resources/Dockerfile-keycloak

# Dockerfile.keycloak
FROM quay.io/keycloak/keycloak:26.5
# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ root –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
USER root
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º curl —á–µ—Ä–µ–∑ microdnf
RUN microdnf install -y curl && \
    microdnf clean all && \
    rm -rf /var/cache/yum
# –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é keycloak (UID 1000)
USER 1000

========================================================================================================================

healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8080/health"]  -> curl: command not found
  test: ["CMD-SHELL", "echo > /dev/tcp/localhost/8080"]        -> TCP healthcheck

========================================================================================================================

                              ******************************************
                              ***   üöÄ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ realm:   ***
                              ******************************************

‚úÖ –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å Keycloak –±–µ–∑ --import-realm:
    keycloak:
      image: quay.io/keycloak/keycloak:26.5
      command: start-dev

docker-compose up keycloak keycloak-postgres

========================================================================================================================

‚úÖ –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –®–∞–≥ 2 —Ç.–∫. –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
        KC_BOOTSTRAP_ADMIN_USERNAME: admin
        KC_BOOTSTRAP_ADMIN_PASSWORD: admin
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Keycloak –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —Å–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8080
–ù–∞–∂–º–∏—Ç–µ Administration Console
–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
    Username: admin
    Password: admin

========================================================================================================================

‚úÖ –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Realm
–í –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –Ω–∞–∂–º–∏—Ç–µ Master ‚Üí Add realm
Realm name: individuals
–ù–∞–∂–º–∏—Ç–µ Create

========================================================================================================================

‚úÖ –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Realm Settings
–í —Ä–∞–∑–¥–µ–ª–µ Realm settings ‚Üí Login:
        ‚úÖ Enabled: ON
        ‚úÖ User registration: ON
        ‚úÖ Login with email: ON
        ‚ùå Duplicate emails: OFF
–í —Ä–∞–∑–¥–µ–ª–µ Tokens:
        Access Token Lifespan: 5 minutes
        Refresh Token Lifespan: ‚úÖ Enabled -> ON
        Refresh Token Lifespan: 30 days
        Revoke Refresh Token: Disabled

‚úÖ –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∏–µ–Ω—Ç
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Clients ‚Üí Create client
        Client type: OpenID Connect
        Client ID: individuals-api
        –ù–∞–∂–º–∏—Ç–µ Next
–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞:
        Client authentication: ‚úÖ ON (confidential client)
        Authentication flow: Standard flow ‚Üí ‚ùå OFF
        Direct access grants: ‚úÖ ON (–¥–ª—è password grant)
        Service accounts roles: ‚úÖ ON (–¥–ª—è Admin API)
–ù–∞–∂–º–∏—Ç–µ Save.

========================================================================================================================

‚úÖ –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Client Credentials
–í —Ä–∞–∑–¥–µ–ª–µ Clients ‚Üí individuals-api ‚Üí Credentials:
        Client authenticator: Client Id and Secret
        –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Secret ‚Äî –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤ application.yml (Client Secret: 9nekCm9JrhldqeBx5bw00LIzIBRYve6l)

PS: –°–µ—Ä–≤–∏—Å (individuals-api) –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å client_id + client_secret –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
    –î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ OAuth2 flow (password grant, client credentials) –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ secret

========================================================================================================================

‚úÖ –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Client Scopes
–í —Ä–∞–∑–¥–µ–ª–µ Clients ‚Üí individuals-api ‚Üí Client scopes ‚Üí –¥–ª—è offline_access –ø–æ—Å—Ç–∞–≤–∏—Ç—å Default

–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –±—É–¥–µ—Ç - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ refresh —Ç–æ–∫–µ–Ω–∞:
        ‚ùå "refresh_expires_in": 1800 (1800 —Å–µ–∫ = 30 –º–∏–Ω)
        ‚úÖ "refresh_expires_in": 2592000 (2592000 —Å–µ–∫ = 30 –¥–Ω–µ–π)

- Default Client Scopes ‚Äî —ç—Ç–æ scopes, –∫–æ—Ç–æ—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ –≤—Å–µ–º –∑–∞–ø—Ä–æ—Å–∞–º –¥–ª—è —ç—Ç–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- offline_access ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π scope, –∫–æ—Ç–æ—Ä—ã–π –≥–æ–≤–æ—Ä–∏—Ç Keycloak: ¬´–í—ã–¥–∞–π offline refresh token —Å –¥–ª–∏—Ç–µ–ª—å–Ω—ã–º —Å—Ä–æ–∫–æ–º –∂–∏–∑–Ω–∏¬ª
- –ë–µ–∑ —ç—Ç–æ–≥–æ scope Keycloak –≤—ã–¥–∞—ë—Ç —Ç–æ–ª—å–∫–æ online refresh token (–ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ SSO session)

========================================================================================================================

‚úÖ –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Protocol Mappers
–í —Ä–∞–∑–¥–µ–ª–µ Clients ‚Üí individuals-api ‚Üí Client scopes ‚Üí individuals-api-dedicated ‚Üí Mappers ‚Üí Add mapper:

Mapper 1: Email (Add predefined mappers -> –≤—ã–±—Ä–∞—Ç—å Email)
        Name: email
        Mapper type: User Property
        User Attribute: email
        ‚úÖ Add to ID token: ON
        ‚úÖ Add to access token: ON
        ‚úÖ Add to userinfo: ON
        ‚úÖ Add to token introspection: ON
Mapper 2: Full Name
        Name: full name
        Mapper type: Full Name
        ‚úÖ Add to ID token: ON
        ‚úÖ Add to access token: ON
        ‚úÖ Add to userinfo: ON
        ‚úÖ Add to token introspection: ON

PS:
Add to token introspection = ON –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–∏ –ø–æ–ª—è –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø—Ä–∏:
        –í–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ /protocol/openid-connect/token/introspect
        –ü–æ–ª—É—á–µ–Ω–∏–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ —á–µ—Ä–µ–∑ Admin API
–≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å—Ü–µ–Ω–∞—Ä–∏—è /auth/me, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ introspection –∏–ª–∏ Admin API.

========================================================================================================================

‚úÖ –®–∞–≥ 9: –°–æ–∑–¥–∞–π—Ç–µ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Realm Roles ‚Üí Create role
        Role name: user
        Description: Default user role
–ù–∞–∂–º–∏—Ç–µ Save
–í Realm settings ‚Üí User registration ‚Üí Default roles ‚Üí –¥–æ–±–∞–≤—å—Ç–µ —Ä–æ–ª—å user (Assign role ‚Üí Realm roles ‚Üí user).

========================================================================================================================

‚úÖ –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É
–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Users ‚Üí Add user
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞—Ä–æ–ª—å –≤ Credentials ‚Üí Set password
Required user actions ‚Üí Update password

========================================================================================================================

‚úÖ –®–∞–≥ 11: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω:

curl -X POST http://localhost:8080/realms/individuals/protocol/openid-connect/token ^
  -H "Content-Type: application/x-www-form-urlencoded" ^
  -d "client_id=individuals-api" ^
  -d "client_secret=9nekCm9JrhldqeBx5bw00LIzIBRYve6l" ^
  -d "grant_type=password" ^
  -d "username=user" ^
  -d "password=user"

–†–µ–∑—É–ª—å—Ç–∞—Ç 1 (refresh_expires_in = 1800):
{
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZ1ZEVjJSZHNvOEFnSUFfQ0tydW1XQUdJODA4WUlQLTNRTHJmNGpEUEVNIn0.eyJleHAiOjE3NzExNzAzNjUsImlhdCI6MTc3MTE3MDA2NSwianRpIjoib25ydHJvOjM4NmNlMWQ4LTFkYjktZjM0Mi02Mzc0LTk5N2ExYTIxODRmNCIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvaW5kaXZpZHVhbHMiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiYzdjYzJiYjMtOGE2ZS00NWRlLTg4NWYtZjkyOGMxNTY1YWE0IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiaW5kaXZpZHVhbHMtYXBpIiwic2lkIjoiejVHSmdQMWEzSDdHVkk2cFBGWWFuaHR6IiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLWluZGl2aWR1YWxzIiwidW1hX2F1dGhvcml6YXRpb24iLCJ1c2VyIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoi0JHQvtGC0Y_QvSDQodC10YDQs9C10LkiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ1c2VyIiwiZ2l2ZW5fbmFtZSI6ItCR0L7RgtGP0L0iLCJmYW1pbHlfbmFtZSI6ItCh0LXRgNCz0LXQuSIsImVtYWlsIjoidXNlckBnbWFpbC5jb20ifQ.kIOoa11l74b_zVwZu0rqK-kTfUgnJNysG4wnhT5bOlwSPacDfH0ji3XEBBKxwagfUnnxi16qWVW9uIjMhPJmtI0ujNpGVfO-wKpjYv7LPfFkmH3UpaLypUqn5xtcnPsC1_VL7ckSpENfaQ10V0RagK3-dyFoOXZ7h-qNnxBBKjw9QPvpa5H85je3FmZUlOw_Zwhc1izR3Di4V6Dtll8SNiciNYWzEuOpjjyQ7vD3f5iaHMXvWfQVR0eQ3RrwhXQGeLTwlAQQdyv79uunjaj3N_hur9JJwo9m9tT1ZdpQnJ1xUrFR-BC06F18oK2WGx8AvdqIMIGccN9iVUA6nhFxVg",
  "expires_in": 300,
  "refresh_expires_in": 1800,
  "refresh_token": "eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxYTIzNWFhZi1iZDY1LTQ3YzctYTJhNi1hMmNhZmNjZTliOGMifQ.eyJleHAiOjE3NzExNzE4NjUsImlhdCI6MTc3MTE3MDA2NSwianRpIjoiNGYxMzdjODUtOTc3OS03NDBkLTZhNDktZWJlZTg0NzI3ZTZmIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pbmRpdmlkdWFscyIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvaW5kaXZpZHVhbHMiLCJzdWIiOiJjN2NjMmJiMy04YTZlLTQ1ZGUtODg1Zi1mOTI4YzE1NjVhYTQiLCJ0eXAiOiJSZWZyZXNoIiwiYXpwIjoiaW5kaXZpZHVhbHMtYXBpIiwic2lkIjoiejVHSmdQMWEzSDdHVkk2cFBGWWFuaHR6Iiwic2NvcGUiOiJhY3IgcHJvZmlsZSBzZXJ2aWNlX2FjY291bnQgcm9sZXMgd2ViLW9yaWdpbnMgZW1haWwgYmFzaWMifQ.uDoiNO8BZ2ykqmtOl3JlgJTuuuGorV_3WcfKl9N20_UpEurw49fbWpjdWHxajLNUdIdTp8G5P6x4zxhNDrU6Zg",
  "token_type": "Bearer",
  "not-before-policy": 0,
  "session_state": "z5GJgP1a3H7GVI6pPFYanhtz",
  "scope": "profile email"
}
–†–µ–∑—É–ª—å—Ç–∞—Ç 2 (refresh_expires_in = 2592000):
{
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZ1ZEVjJSZHNvOEFnSUFfQ0tydW1XQUdJODA4WUlQLTNRTHJmNGpEUEVNIn0.eyJleHAiOjE3NzExNzM0MzIsImlhdCI6MTc3MTE3MzEzMiwianRpIjoib2ZydHJvOjI5MDk3YzUzLTUxNGMtOTQ5Mi04YjkyLWQ0YmYyM2Y1ZmY4ZiIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvaW5kaXZpZHVhbHMiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiYzdjYzJiYjMtOGE2ZS00NWRlLTg4NWYtZjkyOGMxNTY1YWE0IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiaW5kaXZpZHVhbHMtYXBpIiwic2lkIjoiRUZzX3ZqMEN1Y0VnOHVFdVRWUGU0bXZOIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLWluZGl2aWR1YWxzIiwidW1hX2F1dGhvcml6YXRpb24iLCJ1c2VyIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIG9mZmxpbmVfYWNjZXNzIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJuYW1lIjoi0JHQvtGC0Y_QvSDQodC10YDQs9C10LkiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJ1c2VyIiwiZ2l2ZW5fbmFtZSI6ItCR0L7RgtGP0L0iLCJmYW1pbHlfbmFtZSI6ItCh0LXRgNCz0LXQuSIsImVtYWlsIjoidXNlckBnbWFpbC5jb20ifQ.QjBqIBMEQRfu_eXzliJc6sk9NMAtjTFHJROITmeNff-7HHvShgB03ZV4YMyBNuI5QDDir7XjNjybSyS1UMW0yhrt9gKOaST55GbRey0pIMaPfF4KLRqVhkN2JtujAgLIjj1YVd-ic9Fl8mRwgQRBELgsy2AR3HkebiMm2RSjFR--BZFZfWq5BJcmO0WnJHLxqd-pv290O5ps04mkaR0-QEVBKs5NZdQN_Ij-VST9__6CNjpGblwtDcq8LWGxUX7haS_xn0I8HJbk4jcB0B3Ua7wKwQ5b9eS7EYie_nZLkTQYTGIQDzcOOHoUJZCkiBgVqQdUEOG8rjCpNZbFNyY0tw",
  "expires_in": 300,
  "refresh_expires_in": 2592000,
  "refresh_token": "eyJhbGciOiJIUzUxMiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICIxYTIzNWFhZi1iZDY1LTQ3YzctYTJhNi1hMmNhZmNjZTliOGMifQ.eyJleHAiOjE3NzM3NjUxMzIsImlhdCI6MTc3MTE3MzEzMiwianRpIjoiYzJjYWVhMmUtN2ZjYS1kZWUwLWFlYjYtMmRhN2Y1ODQ0MzVlIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3JlYWxtcy9pbmRpdmlkdWFscyIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvaW5kaXZpZHVhbHMiLCJzdWIiOiJjN2NjMmJiMy04YTZlLTQ1ZGUtODg1Zi1mOTI4YzE1NjVhYTQiLCJ0eXAiOiJPZmZsaW5lIiwiYXpwIjoiaW5kaXZpZHVhbHMtYXBpIiwic2lkIjoiRUZzX3ZqMEN1Y0VnOHVFdVRWUGU0bXZOIiwic2NvcGUiOiJhY3IgcHJvZmlsZSBvZmZsaW5lX2FjY2VzcyBzZXJ2aWNlX2FjY291bnQgcm9sZXMgd2ViLW9yaWdpbnMgZW1haWwgYmFzaWMiLCJyZXVzZV9pZCI6ImM2NGUyMDhlLTcwNzEtNDRmMS1iN2ZhLWJhN2RhOTM5ZmRlNCJ9.5If-q2ryNHy5vmjPdp8Wsqs5KuYovTk4QmJtZAshrpM7YiwNgRcLtoWd2U0sz4t4-LnmX2MFtE-__o2sUEorNw",
  "token_type": "Bearer",
  "not-before-policy": 0,
  "session_state": "EFs_vj0CucEg8uEuTVPe4mvN",
  "scope": "profile offline_access email"
}

========================================================================================================================
–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ access_token:
1) Decoded Header:
{
  "alg": "RS256",
  "typ": "JWT",
  "kid": "agVDV2Rdso8AgIA_CKrumWAGI808YIP-3QLrf4jDPEM"
}
2) Decoded Payload:
{
  "exp": 1771173432,
  "iat": 1771173132,
  "jti": "ofrtro:29097c53-514c-9492-8b92-d4bf23f5ff8f",
  "iss": "http://localhost:8080/realms/individuals",
  "aud": "account",
  "sub": "c7cc2bb3-8a6e-45de-885f-f928c1565aa4",
  "typ": "Bearer",
  "azp": "individuals-api",
  "sid": "EFs_vj0CucEg8uEuTVPe4mvN",
  "acr": "1",
  "allowed-origins": [
    "/*"
  ],
  "realm_access": {
    "roles": [
      "offline_access",
      "default-roles-individuals",
      "uma_authorization",
      "user"
    ]
  },
  "resource_access": {
    "account": {
      "roles": [
        "manage-account",
        "manage-account-links",
        "view-profile"
      ]
    }
  },
  "scope": "profile offline_access email",
  "email_verified": false,
  "name": "–ë–æ—Ç—è–Ω –°–µ—Ä–≥–µ–π",
  "preferred_username": "user",
  "given_name": "–ë–æ—Ç—è–Ω",
  "family_name": "–°–µ—Ä–≥–µ–π",
  "email": "user@gmail.com"
}
========================================================================================================================

‚úÖ –®–∞–≥ 12: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ Realm
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Realm settings ‚Üí Actions ‚Üí Export
2. –í—ã–±–µ—Ä–∏—Ç–µ Export clients and users: OFF (—Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é)
3. –ù–∞–∂–º–∏—Ç–µ Export
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ JSON –∫–∞–∫ realm-config.json

========================================================================================================================

‚úÖ –®–∞–≥ 13: –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml
–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç:

keycloak:
  image: quay.io/keycloak/keycloak:26.5
  command: start-dev --import-realm
  volumes:
    - ./individuals-api/resources/realm-config.json:/opt/keycloak/data/import/realm-config.json

========================================================================================================================

‚úÖ –®–∞–≥ 14: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –ø–æ–ª—É—á–µ–Ω–∏–µ access_token

curl -X POST http://localhost:8080/realms/individuals/protocol/openid-connect/token ^
  -d "client_id=individuals-api" ^
  -d "client_secret=9nekCm9JrhldqeBx5bw00LIzIBRYve6l" ^
  -d "grant_type=client_credentials"

{
  "access_token": "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJhZ1ZEVjJSZHNvOEFnSUFfQ0tydW1XQUdJODA4WUlQLTNRTHJmNGpEUEVNIn0.eyJleHAiOjE3NzExNzc1NDcsImlhdCI6MTc3MTE3NzI0NywianRpIjoidHJydGNjOmI4YWQ5MDBlLWI4NTMtODA1ZC00ZDBiLTFmMDg5OWRjZjVjYSIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9yZWFsbXMvaW5kaXZpZHVhbHMiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiN2ZkZjVkZmYtMTEyZC00YmJkLWJkNDAtY2Y5MGU5ZGJjNzg5IiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiaW5kaXZpZHVhbHMtYXBpIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyIvKiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJkZWZhdWx0LXJvbGVzLWluZGl2aWR1YWxzIiwidW1hX2F1dGhvcml6YXRpb24iLCJ1c2VyIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIG9mZmxpbmVfYWNjZXNzIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJjbGllbnRIb3N0IjoiMTcyLjI0LjAuMSIsInByZWZlcnJlZF91c2VybmFtZSI6InNlcnZpY2UtYWNjb3VudC1pbmRpdmlkdWFscy1hcGkiLCJjbGllbnRBZGRyZXNzIjoiMTcyLjI0LjAuMSIsImNsaWVudF9pZCI6ImluZGl2aWR1YWxzLWFwaSJ9.KMoY8Gc-rDw9Z-lc9xTgevvXIV-DjqMpqfw19e0pi2NNlxJ04VyErwGMwgJeoeKu1U-WX4fABUZsQEfrwlnrGXe_B6Iw2G804uXtKtETFy56535w1p8LrYfZcEDtUBrZZyTXpdjsYsZxWwxKlOb4R2604KXn7Ulq5yOI62xxglzcXR8h1TIGHmOzMd6BCXLSE9l8ZzRsK61rU0lnW8aLliOr84xF8D6bY3OPzFxSLl9u0J1FflD4EmZ4Bf52gMeLW2UOzVAvDnXaRxJXPry7cNdYt_Pp3ji7ijPRiI_S4Itl1HimkcLcVjU5KZOwPBip1kXEPmwx87-eXt7EnQ84Ug",
  "expires_in": 300,
  "refresh_expires_in": 0,
  "token_type": "Bearer",
  "not-before-policy": 0,
  "scope": "profile offline_access email"
}